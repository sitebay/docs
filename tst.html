<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Compressor</title>
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@latest"></script>
</head>
<body>
    <input type="file" id="uploader" accept="video/*">
    <button onclick="compressVideo()">Compress Video</button>
    <video id="outputVideo" controls></video>

    <script>
        const { createFFmpeg, fetchFile } = FFmpeg;
        const ffmpeg = createFFmpeg({ log: true });

        async function compressVideo() {
            const input = document.getElementById('uploader').files[0];
            if (!input) {
                alert('Please upload a video file.');
                return;
            }

            if (!ffmpeg.isLoaded()) {
                await ffmpeg.load();
            }

            ffmpeg.FS('writeFile', input.name, await fetchFile(input));

            // Example ffmpeg command to compress video, adjust as needed
            await ffmpeg.run('-i', input.name, '-b:v', '1M', '-s', '640x480', 'output.mp4');

            const data = ffmpeg.FS('readFile', 'output.mp4');

            const video = document.getElementById('outputVideo');
            video.src = URL.createObjectURL(new Blob([data.buffer], { type: 'video/mp4' }));
        }
    </script>
</body>
</html>

